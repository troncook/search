<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <title>Search Results</title>
  </head>
  <body>
    <div class="container mt-5">
      <h1>Search Results</h1>
      <table class="table" id="resultsTable">
        <thead>
          <tr>
            <th scope="col"><a href="#" onclick="sortTable(0)">ContractID</a></th>
            <th scope="col"><a href="#" onclick="sortTable(1)">BusinessName</a></th>
            <th scope="col"><a href="#" onclick="sortTable(2)">PartnerName</a></th>
            <th scope="col"><a href="#" onclick="sortTable(3)">StartDate</a></th>
            <th scope="col"><a href="#" onclick="sortTable(4)">EndDate</a></th>
            <th scope="col"><a href="#" onclick="sortTable(5)">ContractValue</a></th>
            <th scope="col"><a href="#" onclick="sortTable(6)">PaymentTerms</a></th>
            <th scope="col"><a href="#" onclick="sortTable(7)">ScopeOfWork</a></th>
            <th scope="col"><a href="#" onclick="sortTable(8)">ContractStatus</a></th>
            <th scope="col"><a href="#" onclick="sortTable(9)">RenewalDate</a></th>
            <th scope="col"><a href="#" onclick="sortTable(10)">TerminationClause</a></th>
            <th scope="col"><a href="#" onclick="sortTable(11)">ConfidentialityClause</a></th>
            <th scope="col"><a href="#" onclick="sortTable(12)">Jurisdiction</a></th>
            <th scope="col"><a href="#" onclick="sortTable(13)">ContractDocument</a></th>
          </tr>
        </thead>
        <tbody>
          {% for result in results %}
          <tr>
            <td>{{ result['ContractID'] }}</td>
            <td>{{ result['BusinessName'] }}</td>
            <td>{{ result['PartnerName'] }}</td>
            <td>{{ result['StartDate'] }}</td>
            <td>{{ result['EndDate'] }}</td>
            <td>{{ result['ContractValue'] }}</td>
            <td>{{ result['PaymentTerms'] }}</td>
            <td>{{ result['ScopeOfWork'] }}</td>
            <td>{{ result['ContractStatus'] }}</td>
            <td>{{ result['RenewalDate'] }}</td>
            <td>{{ result['TerminationClause'] }}</td>
            <td>{{ result['ConfidentialityClause'] }}</td>
            <td>{{ result['Jurisdiction'] }}</td>
            <td>{{ result['ContractDocument'] }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- JavaScript to handle table sorting -->
    <script>
      function sortTable(n) {
        var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
        table = document.getElementById("resultsTable");
        switching = true;
        // Set the sorting direction to ascending
        dir = "asc";
        while (switching) {
          switching = false;
          rows = table.rows;
          for (i = 1; i < (rows.length - 1); i++) {
            shouldSwitch = false;
            x = rows[i].getElementsByTagName("TD")[n];
            y = rows[i + 1].getElementsByTagName("TD")[n];
            if (dir == "asc") {
              if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                shouldSwitch = true;
                break;
              }
            } else if (dir == "desc") {
              if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
                shouldSwitch = true;
                break;
              }
            }
          }
          if (shouldSwitch) {
            rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
            switching = true;
            switchcount++;
          } else {
            if (switchcount == 0 && dir == "asc") {
              dir = "desc";
              switching = true;
            }
          }
        }
      }
    </script>

    <!-- Optional JavaScript; choose one of the two! -->
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html

